{"ast":null,"code":"var _jsxFileName = \"/Users/dom05/Documents/17-214/f25-lab11/front-end/src/App.tsx\";\nimport React from 'react';\nimport './App.css'; // import the css file to enable your styles.\n\nimport BoardCell from './Cell';\n\n/**\n * Define the type of the props field for a React component\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n/**\n * Using generics to specify the type of props and state.\n * props and state is a special field in a React component.\n * React will keep track of the value of props and state.\n * Any time there's a change to their values, React will\n * automatically update (not fully re-render) the HTML needed.\n * \n * props and state are similar in the sense that they manage\n * the data of this component. A change to their values will\n * cause the view (HTML) to change accordingly.\n * \n * Usually, props is passed and changed by the parent component;\n * state is the internal value of the component and managed by\n * the component itself.\n */\nclass App extends React.Component {\n  /**\n   * @param props has type Props\n   */\n  constructor(props) {\n    super(props);\n    /**\n     * state has type GameState as specified in the class inheritance.\n     */\n    this.initialized = false;\n    this.newGame = async () => {\n      const response = await fetch('/newgame');\n      const json = await response.json();\n      this.setState({\n        cells: json['cells'],\n        currentPlayer: json['currentPlayer'],\n        winner: json['winner'],\n        historySize: json['historySize']\n      });\n    };\n    this.undo = async () => {\n      const response = await fetch('/undo');\n      const json = await response.json();\n      this.setState({\n        cells: json['cells'],\n        currentPlayer: json['currentPlayer'],\n        winner: json['winner'],\n        historySize: json['historySize']\n      });\n    };\n    this.state = {\n      cells: [],\n      currentPlayer: 'X',\n      winner: null,\n      historySize: 1\n    };\n  }\n\n  /**\n   * Use arrow function, i.e., () => {} to create an async function,\n   * otherwise, 'this' would become undefined in runtime. This is\n   * just an issue of Javascript.\n   */\n\n  /**\n   * play will generate an anonymous function that the component\n   * can bind with.\n   * @param x \n   * @param y \n   * @returns \n   */\n  play(x, y) {\n    return async e => {\n      // prevent the default behavior on clicking a link; otherwise, it will jump to a new page.\n      e.preventDefault();\n      const response = await fetch(`/play?x=${x}&y=${y}`);\n      const json = await response.json();\n      this.setState({\n        cells: json['cells'],\n        currentPlayer: json['currentPlayer'],\n        winner: json['winner'],\n        historySize: json['historySize']\n      });\n    };\n  }\n  createCell(cell, index) {\n    if (cell.playable)\n      /**\n       * key is used for React when given a list of items. It\n       * helps React to keep track of the list items and decide\n       * which list item need to be updated.\n       * @see https://reactjs.org/docs/lists-and-keys.html#keys\n       */\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          onClick: this.play(cell.x, cell.y),\n          children: /*#__PURE__*/_jsxDEV(BoardCell, {\n            cell: cell\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this);else return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(BoardCell, {\n        cell: cell\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 26\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this);\n  }\n\n  /**\n   * This function will call after the HTML is rendered.\n   * We update the initial state by creating a new game.\n   * @see https://reactjs.org/docs/react-component.html#componentdidmount\n   */\n  componentDidMount() {\n    /**\n     * setState in DidMount() will cause it to render twice which may cause\n     * this function to be invoked twice. Use initialized to avoid that.\n     */\n    if (!this.initialized) {\n      this.newGame();\n      this.initialized = true;\n    }\n  }\n\n  /**\n   * The only method you must define in a React.Component subclass.\n   * @returns the React element via JSX.\n   * @see https://reactjs.org/docs/react-component.html\n   */\n  render() {\n    /**\n     * We use JSX to define the template. An advantage of JSX is that you\n     * can treat HTML elements as code.\n     * @see https://reactjs.org/docs/introducing-jsx.html\n     */\n    const {\n      winner,\n      currentPlayer,\n      historySize\n    } = this.state;\n    const instructions = winner ? winner === 'DRAW' ? 'Game over: Draw' : `Winner: ${winner}` : `Current player: ${currentPlayer}`;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"board\",\n        children: this.state.cells.map((cell, i) => this.createCell(cell, i))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"instructions\",\n        children: instructions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"bottombar\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: /* get the function, not call the function */this.newGame,\n          children: \"New Game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.undo,\n          disabled: historySize <= 1,\n          children: \"Undo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","BoardCell","jsxDEV","_jsxDEV","App","Component","constructor","props","initialized","newGame","response","fetch","json","setState","cells","currentPlayer","winner","historySize","undo","state","play","x","y","e","preventDefault","createCell","cell","index","playable","children","href","onClick","fileName","_jsxFileName","lineNumber","columnNumber","componentDidMount","render","instructions","id","map","i","disabled"],"sources":["/Users/dom05/Documents/17-214/f25-lab11/front-end/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport './App.css'; // import the css file to enable your styles.\nimport { GameState, Cell } from './game';\nimport BoardCell from './Cell';\n\n/**\n * Define the type of the props field for a React component\n */\ninterface Props { }\n\n/**\n * Using generics to specify the type of props and state.\n * props and state is a special field in a React component.\n * React will keep track of the value of props and state.\n * Any time there's a change to their values, React will\n * automatically update (not fully re-render) the HTML needed.\n * \n * props and state are similar in the sense that they manage\n * the data of this component. A change to their values will\n * cause the view (HTML) to change accordingly.\n * \n * Usually, props is passed and changed by the parent component;\n * state is the internal value of the component and managed by\n * the component itself.\n */\nclass App extends React.Component<Props, GameState> {\n  private initialized: boolean = false;\n\n  /**\n   * @param props has type Props\n   */\n  constructor(props: Props) {\n    super(props)\n    /**\n     * state has type GameState as specified in the class inheritance.\n     */\n    this.state = { cells: [],currentPlayer: 'X', winner: null, historySize: 1  }\n  }\n\n  /**\n   * Use arrow function, i.e., () => {} to create an async function,\n   * otherwise, 'this' would become undefined in runtime. This is\n   * just an issue of Javascript.\n   */\n  newGame = async () => {\n    const response = await fetch('/newgame');\n    const json = await response.json();\n    this.setState({ cells: json['cells'],\n                    currentPlayer: json['currentPlayer'], \n                    winner: json['winner'], \n                    historySize: json['historySize'] });\n  }\n\n  undo = async () => {\n    const response = await fetch('/undo');\n    const json = await response.json();\n    this.setState({\n      cells: json['cells'],\n      currentPlayer: json['currentPlayer'],\n      winner: json['winner'],\n      historySize: json['historySize'],\n    });\n  };\n\n  /**\n   * play will generate an anonymous function that the component\n   * can bind with.\n   * @param x \n   * @param y \n   * @returns \n   */\n  play(x: number, y: number): React.MouseEventHandler {\n    return async (e) => {\n      // prevent the default behavior on clicking a link; otherwise, it will jump to a new page.\n      e.preventDefault();\n      const response = await fetch(`/play?x=${x}&y=${y}`)\n      const json = await response.json();\n      this.setState({ cells: json['cells'],\n                    currentPlayer: json['currentPlayer'], \n                    winner: json['winner'], \n                    historySize: json['historySize'] });\n    }\n  }\n\n  createCell(cell: Cell, index: number): React.ReactNode {\n    if (cell.playable)\n      /**\n       * key is used for React when given a list of items. It\n       * helps React to keep track of the list items and decide\n       * which list item need to be updated.\n       * @see https://reactjs.org/docs/lists-and-keys.html#keys\n       */\n      return (\n        <div key={index}>\n          <a href='/' onClick={this.play(cell.x, cell.y)}>\n            <BoardCell cell={cell}></BoardCell>\n          </a>\n        </div>\n      )\n    else\n      return (\n        <div key={index}><BoardCell cell={cell}></BoardCell></div>\n      )\n  }\n\n  /**\n   * This function will call after the HTML is rendered.\n   * We update the initial state by creating a new game.\n   * @see https://reactjs.org/docs/react-component.html#componentdidmount\n   */\n  componentDidMount(): void {\n    /**\n     * setState in DidMount() will cause it to render twice which may cause\n     * this function to be invoked twice. Use initialized to avoid that.\n     */\n    if (!this.initialized) {\n      this.newGame();\n      this.initialized = true;\n    }\n  }\n\n  /**\n   * The only method you must define in a React.Component subclass.\n   * @returns the React element via JSX.\n   * @see https://reactjs.org/docs/react-component.html\n   */\n  render(): React.ReactNode {\n    /**\n     * We use JSX to define the template. An advantage of JSX is that you\n     * can treat HTML elements as code.\n     * @see https://reactjs.org/docs/introducing-jsx.html\n     */\n    const { winner, currentPlayer, historySize } = this.state;\n\n    const instructions = winner\n      ? winner === 'DRAW'\n        ? 'Game over: Draw'\n        : `Winner: ${winner}`\n      : `Current player: ${currentPlayer}`;\n\n    return (\n      <div>\n        <div id=\"board\">\n          {this.state.cells.map((cell, i) => this.createCell(cell, i))}\n        </div>\n        <div id = \"instructions\">\n          {instructions}\n        </div>\n        <div id=\"bottombar\">\n          <button onClick={/* get the function, not call the function */this.newGame}>New Game</button>\n          {/* Exercise: implement Undo function */}\n          <button onClick={this.undo} disabled={historySize <= 1}>Undo</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}